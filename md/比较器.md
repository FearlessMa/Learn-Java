# æ¯”è¾ƒå™¨

## ç¬¬13ç«  Â» è¯¾æ—¶52 æ¯”è¾ƒå™¨é—®é¢˜å¼•å‡º

* æ‰€è°“çš„æ¯”è¾ƒå™¨æŒ‡çš„æ˜¯è¿›è¡Œå¤§å°å…³ç³»çš„ç¡®å®š

* é—®é¢˜çš„å¼•å‡º
    * å¦‚æœè¦è¿›è¡Œæ•°ç»„æ“ä½œï¼Œjava.util.Arraysçš„æ“ä½œç±»æ¥å®Œæˆã€‚è¿™ä¸ªç±»æä¾›å¤§å¤šæ•°æ•°ç»„çš„æ“ä½œï¼Œè¿˜æä¾›æœ‰ä¸€ç§å¯¹è±¡æ•°ç»„çš„æ’åºæ”¯æŒã€‚
    * public static void sortâ€‹(Object[] a)

* å®ç°å¯¹è±¡æ•°ç»„çš„æ’åº

```java
import java.util.Arrays;

public class JavaDemo56 {
    public static void main(String[] args) {
        // å¯¹è±¡æ•°ç»„
        Integer data[] = new Integer[] { 10, 2, 5, 3, 9 };
        // å¯¹è±¡æ•°ç»„æ’åº
        Arrays.sort(data);
        System.out.println(Arrays.toString(data));
        //[2, 3, 5, 9, 10]
    }
}
```

* è‡ªå®šä¹‰ç±»æ’åºå¤„ç†

* è¿è¡Œæ—¶å¼‚å¸¸

    * class Person cannot be cast to class java.lang.Comparable
    * æ²¡æœ‰å®ç°Comparableæ–¹æ³•
    * ä»»æ„ä¸€ä¸ªç±»åœ¨é»˜è®¤æƒ…å†µä¸‹æ— æ³•ä½¿ç”¨ç³»ç»Ÿå†…éƒ¨çš„ç±»å®ç°æ•°ç»„æ’åºæˆ–è€…æ¯”è¾ƒï¼Œå› ä¸ºæ²¡æœ‰æ˜ç¡®çš„æŒ‡å‡ºåˆ°åº•è¦å¦‚ä½•æ¯”è¾ƒçš„å®šä¹‰ã€‚(æ²¡æœ‰æ¯”è¾ƒè§„åˆ™)ï¼Œåœ¨javaé‡Œä¸ºäº†ç»Ÿä¸€æ¯”è¾ƒè§„åˆ™çš„å®šä¹‰ï¼Œæ‰€ä»¥æä¾›æœ‰æ¯”è¾ƒå™¨çš„æ¥å£ã€‚Comparableæ¥å£

```java
import java.util.Arrays;
class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "name:" + this.name + "ã€age:" + this.age;
    }
}

public class JavaDemo56 {
    public static void main(String[] args) {
        Person data[] = new Person[3];
        data[0] = new Person("å¼ ä¸‰", 10);
        data[1] = new Person("æå››", 11);
        data[2] = new Person("ç‹äº”", 12);
        // å¯¹è±¡æ•°ç»„æ’åº
        Arrays.sort(data);
        System.out.println(Arrays.toString(data));
        // Exception in thread "main" java.lang.ClassCastException: class Person cannot
        // be cast to class java.lang.Comparable (Person is in unnamed module of loader
        // 'app'; java.lang.Comparable is in module java.base of loader 'bootstrap')
        // at
        // java.base/java.util.ComparableTimSort.countRunAndMakeAscending(ComparableTimSort.java:320)
        // at java.base/java.util.ComparableTimSort.sort(ComparableTimSort.java:188)
        // at java.base/java.util.Arrays.sort(Arrays.java:1249)
        // at JavaDemo56.main(JavaDemo56.java:24)
    }
}
```

## ç¬¬13ç«  Â» è¯¾æ—¶53 Comparableæ¯”è¾ƒå™¨

* å¦‚æœè¦å®ç°å¯¹è±¡çš„æ¯”è¾ƒï¼Œéœ€è¦æœ‰æ¯”è¾ƒå™¨æ¥åˆ¶å®šæ¯”è¾ƒè§„åˆ™ã€‚è€Œæ¯”è¾ƒè§„åˆ™å°±é€šè¿‡Comparableæ¥å®ç°ã€‚å¯¹äºComparableè€Œè¨€éœ€è¦çŸ¥é“å…¶åŸºæœ¬çš„å®šä¹‰ç»“æ„ã€‚

```java
Module java.base
Package java.lang
Interface Comparable<T>

Method
int compareToâ€‹(T o)

Since:
1.2
See Also:
Comparator

public interface Comparable<T>{
    /**
     * å®ç°æ¯”è¾ƒå™¨å¯¹è±¡å¤„ç†æ“ä½œ
     * @param o éœ€è¦æ¯”è¾ƒçš„å¯¹è±¡
     * @return  å½“å‰å¯¹è±¡æ¯”ä¼ å…¥çš„å°è¿”å›è´Ÿæ•°ï¼Œå¤§è¿”å›æ­£æ•°ï¼Œç›¸ç­‰è¿”å›0
     */
    public int compareTo(T o);
}
```

![](../img/Comparable.png)

```java

import java.util.Arrays;

class Person implements Comparable<Person> {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "name:" + this.name + "ã€age:" + this.age;
    }

    public int getAge() {
        return age;
    }

    @Override
    public int compareTo(Person p) {
        return  p.age-this.age;
    }
}

public class JavaDemo56 {
    public static void main(String[] args) {
        Person data[] = new Person[3];
        data[0] = new Person("å¼ ä¸‰", 10);
        data[1] = new Person("æå››", 11);
        data[2] = new Person("ç‹äº”", 12);
        // å¯¹è±¡æ•°ç»„æ’åº
        Arrays.sort(data);
        System.out.println(Arrays.toString(data));
        // [name:ç‹äº”ã€age:12, name:æå››ã€age:11, name:å¼ ä¸‰ã€age:10]
    }
}
```

* æ’åºé‡Œé¢åªéœ€è¦æœ‰ä¸€ä¸ªCompareToçš„æ–¹æ³•è¿›è¡Œæ’åºè§„åˆ™çš„å®šä¹‰ï¼Œè€Œåæ•´ä¸ªjavaç³»ç»Ÿé‡Œé¢å°±å¯ä»¥ä¸ºå…¶å®ç°æ’åºå¤„ç†äº†

## ç¬¬13ç«  Â» è¯¾æ—¶54 Comparatoræ¯”è¾ƒå™¨

* Comparatorå±äºä¸€ç§æŒ½æ•‘çš„æ¯”è¾ƒåŠŸèƒ½ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯è§£å†³ä¸€äº›æ²¡æœ‰ä½¿ç”¨Comparableæ¥å£æ’åºçš„ç±»çš„å¯¹è±¡çš„æ•°ç»„æ’åºæ“ä½œã€‚

* ğŸŒ° ç”±äºé¡¹ç›®å·²ç»å¼€å‘å®Œæˆï¼Œå…ˆæœŸçš„è®¾è®¡å¹¶æ²¡æœ‰è€ƒè™‘åˆ°æ¯”è¾ƒæ’åºã€‚æ²¡æœ‰å®ç°Comparableæ¥å£ã€‚è‹¥å¹²è¿­ä»£åéœ€è¦å¯¹è¯¥ç±»è¿›è¡Œæ’åºä½†æ˜¯åˆä¸èƒ½ä¿®æ”¹è¯¥ç±»ã€‚
    * è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨Comparator
    * åœ¨Arraysç±»é‡Œï¼Œæ’åºæœ‰å¦å¤–ä¸€ç§å®ç°ã€‚
        * åŸºäºComparatorçš„æ’åºå¤„ç†ï¼špublic static <T> void sortâ€‹(T[] a, Comparator<? super T> c)

```java
Module java.base
Package java.util
Interface Comparator<T>

Method
int compareâ€‹(T o1, T o2)

```

![](../img/Comparator.png)

```java

import java.util.Arrays;
import java.util.Comparator;

class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "name:" + this.name + "ã€age:" + this.age;
    }

    public int getAge() {
        return age;
    }
}

class PersonComparator implements Comparator<Person> {
    @Override
    public int compare(Person p, Person p2) {
        return p.getAge() - p2.getAge();
    }
}

public class JavaDemo56 {
    public static void main(String[] args) {
        Person data[] = new Person[3];
        data[0] = new Person("å¼ ä¸‰", 32);
        data[1] = new Person("æå››", 11);
        data[2] = new Person("ç‹äº”", 22);
        // å¯¹è±¡æ•°ç»„æ’åº
        Arrays.sort(data,new PersonComparator());
        System.out.println(Arrays.toString(data));
        // [name:æå››ã€age:11, name:ç‹äº”ã€age:22, name:å¼ ä¸‰ã€age:32]
    }
}
```

* å¯¹äºæ’åºæ“ä½œå¦‚æœä¸æ˜¯å¿…é¡»çš„æƒ…å†µä¸‹ï¼Œå¢™è£‚ä¸å»ºè®®ä½¿ç”¨Comparatorï¼Œå»ºè®®åœ¨ç±»å®šä¹‰æ—¶å°±å®ç°Comparableæ¥å£ã€‚

### Comparableä¸Comparatorçš„åŒºåˆ«

|comparabel|comparator|
|---|---|
|java.lang.Comparableæ˜¯åœ¨ç±»å®šä¹‰çš„æ—¶å€™å®ç°çš„çˆ¶æ¥å£ï¼Œä¸»è¦ç”¨äºå®šä¹‰æ’åºè§„åˆ™ï¼Œåªæœ‰ä¸€ä¸ªcompareToçš„æ’åºæ–¹æ³•|java.util.Comparatoræ˜¯æŒ½æ•‘çš„æ¯”è¾ƒæ“ä½œï¼Œéœ€è¦è®¾ç½®å•ç‹¬çš„æ¯”è¾ƒå™¨è§„åˆ™ç±»æ¥å®ç°æ’åºï¼Œé‡Œé¢æœ‰compareæ–¹æ³•|