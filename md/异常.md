# å¼‚å¸¸

## å¼‚å¸¸çš„å¤„ç†

* å¯¼è‡´ç¨‹åºä¸­æ–­æ‰§è¡Œçš„ä¸€ç§æŒ‡ä»¤æµã€‚

* ä¸ºäº†ä¿è¯ç¨‹åºå‡ºç°éè‡´å‘½é”™è¯¯ä¹‹åï¼Œç¨‹åºä¾ç„¶å¯ä»¥æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œä»¥ä¿è¯ç¨‹åºçš„é¡ºåˆ©æ‰§è¡Œã€‚

### javaä¸­å¼‚å¸¸å¤„ç†

* å…³é”®å­—ï¼š tryã€catchã€finally

* åŸºæœ¬å¤„ç†ç»“æ„

```java
try{
    //å¯èƒ½å‡ºç°å¼‚å¸¸çš„ç¨‹åºä»£ç 
}catch(){//å¼‚å¸¸ç±»å‹ å¼‚å¸¸å¯¹è±¡
    //å¼‚å¸¸å¤„ç†
}catch(){

}finally{
    // ä¸ç®¡å¼‚å¸¸æ˜¯å¦å¤„ç†éƒ½è¦æ‰§è¡Œ
}

```

* å¸¸ç”¨ç»„åˆï¼š try...catchã€try...catch...finallyã€ try...finally

* ğŸŒ°

```java
// å¼‚å¸¸ä»£ç 
public class JavaDemo18 {
    public static void main(String[] args) {
        System.out.println("ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ");
        System.out.println("ã€2ã€‘è®¡ç®—10/2" + (10 / 0));
        System.out.println("ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ");

            // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
            // Exception in thread "main" java.lang.ArithmeticException: / by zero
            //     at JavaDemo18.main(JavaDemo18.java:4)
    }
}
```

```java
public class JavaDemo18 {
    public static void main(String[] args) {
        System.out.println("ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ");
        try{
            System.out.println("ã€2ã€‘è®¡ç®—10/2=" + (10 / 0));
        }catch(ArithmeticException e){
            System.out.println(e);
        }finally{
            System.out.println("æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ");
        }
        System.out.println("ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ");
        // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
        // java.lang.ArithmeticException: / by zero
        // æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ
        // ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ
    }
}
```

* è·å–å®Œæ•´å¼‚å¸¸ä¿¡æ¯
    * printStackTrace()

```java
public class JavaDemo18 {
    public static void main(String[] args) {
        System.out.println("ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ");
        try{
            System.out.println("ã€2ã€‘è®¡ç®—10/2=" + (10 / 0));
        }catch(ArithmeticException e){
            e.printStackTrace();//è·å–å®Œæˆçš„å¼‚å¸¸ä¿¡æ¯
        }finally{
            System.out.println("æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ");
        }
        System.out.println("ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ");
        // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
        // java.lang.ArithmeticException: / by zero
        // at JavaDemo18.main(JavaDemo18.java:5)
        // æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ
        // ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ
    }
}
```

### å¤„ç†å¤šä¸ªå¼‚å¸¸

* åœ¨ç¨‹åºä¸­å¯èƒ½äº§ç”Ÿå¤šä¸ªå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªcatchè¿›è¡Œå¼‚å¸¸çš„æ•è·ã€‚

* å³ä½¿æœ‰äº†å¼‚å¸¸å¤„ç†ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰è¿›è¡Œæ­£ç¡®çš„å¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆç¨‹åºä¹Ÿä¼šå¯¼è‡´ä¸­æ–­ã€‚(finallyçš„ä»£ç ä¾ç„¶æ‰§è¡Œ)

### å¼‚å¸¸å¤„ç†æµç¨‹

* å¼‚å¸¸äº§ç”Ÿä¹‹åç¨‹åºåšäº†å“ªäº›å¤„ç†

![](../img/å¼‚å¸¸.png)

* 1ã€åœ¨ç¨‹åºè¿è¡Œä¸­æ‰ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œä¸€æ—¦åœ¨ç¨‹åºä¹‹ä¸­äº§ç”Ÿäº†å¼‚å¸¸ä¹‹å è‡ªåŠ¨å®ä¾‹åŒ–ç›¸å…³çš„å¼‚å¸¸ç±»
* 2ã€å¦‚æœæ­¤æ—¶ç¨‹åºä¹‹ä¸­æ²¡æœ‰æä¾›å¼‚å¸¸å¤„ç†çš„æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨jvmçš„é»˜è®¤å¼‚å¸¸å¤„ç†ï¼Œé¦–å…ˆè¿›è¡Œå¼‚å¸¸ä¿¡æ¯çš„æ‰“å°ï¼Œè€Œåç›´æ¥é€€å‡ºå½“å‰çš„ç¨‹åºã€‚
* 3ã€ æ­¤æ—¶ç¨‹åºä¸­å¦‚æœå­˜åœ¨æœ‰å¼‚å¸¸å¤„ç†é‚£ä¹ˆè¿™ä¸ªäº§ç”Ÿçš„å¼‚å¸¸ç±»çš„å®ä¾‹åŒ–å¯¹è±¡å°†ä¼šè¢«tryè¯­å¥æ•è·
* 4ã€ tryæ•è·åˆ°å¼‚å¸¸ä¹‹åï¼Œä¸å…¶åŒ¹é…åˆ°çš„catchä¸­çš„å¼‚å¸¸ç±»å‹è¿›è¡Œä¸€æ¬¡æ¯”å¯¹ã€‚
    * å¦‚æœæ­¤æ—¶ä¸catchä¸­çš„æ•è·å¼‚å¸¸ç±»ç›¸åŒï¼Œåˆ™è®¤ä¸ºåº”è¯¥ä½¿ç”¨æ­¤catchè¿›è¡Œå¼‚å¸¸å¤„ç†
    * å¦‚æœä¸åŒ¹é…åç»­è¿˜æœ‰catchè¯­å¥ï¼Œç»§ç»­åŒ¹é…åç»­catchç±»å‹ã€‚å¦‚æœç±³æœ‰åŒ¹é…æˆåŠŸï¼Œåˆ™æ— æ³•è¿›è¡Œå¼‚å¸¸å¤„ç†
* 5ã€ ä¸ç®¡æœ€åæœ‰æ²¡æœ‰å¤„ç†å¼‚å¸¸æˆåŠŸéƒ½æœ€ç»ˆéƒ½è¦æ‰§è¡Œfinallyä¸­çš„è¯­å¥ã€‚
    * å¦‚æœå½“å‰å¼‚å¸¸å¤„ç†è¿‡äº†ï¼Œåˆ™ç»§ç»­å‘åæ‰§è¡Œä»£ç ã€‚
    * å¦‚æœæ²¡æœ‰å¤„ç†ï¼Œåˆ™äº¤ç”±jvmè¿›è¡Œé»˜è®¤å¼‚å¸¸å¤„ç†ã€‚


* å¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹å®é™…ä¸Šæ˜¯å¤„ç†çš„å¼‚å¸¸é”™è¯¯çš„å®ä¾‹åŒ–å¯¹è±¡
    * Throwable
        * Error ï¼š æ­¤æ—¶ç¨‹åºè¿˜æœªæ‰§è¡Œå‡ºç°çš„é”™è¯¯ï¼Œå¼€å‘è€…æ— æ³•å¤„ç†
        * Exception ï¼š ç¨‹åºä¸­å‡ºç°çš„å¼‚å¸¸å¼€å‘è€…å¯ä»¥å¤„ç†ï¼Œåœ¨å¼€å‘ä¹‹ä¸­çœŸæ­£è¦å…³æ³¨çš„å°±æ˜¯Exception

* å¼‚å¸¸äº§ç”Ÿçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå¼‚å¸¸çš„å®ä¾‹åŒ–å¯¹è±¡ï¼ŒæŒ‰ç…§å¯¹è±¡çš„è½¬æ¢åŸåˆ™ï¼Œå¯ä»¥è‡ªåŠ¨å‘çˆ¶ç±»(Exception)è½¬å‹ã€‚

* ç®€åŒ–å¼‚å¸¸å¤„ç†

```java
public class JavaDemo18 {
    public static void main(String[] args) {
        System.out.println("ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ");
        try {
            int x = Integer.parseInt(args[0]);
            int y = Integer.parseInt(args[1]);
            System.out.println("ã€2ã€‘è®¡ç®—x/y=" + (x / y));
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            System.out.println("æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ");
        }
        System.out.println("ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ");
        // æ— å‚æ•° ä¸‹æ ‡è¶Šç•Œé”™è¯¯ java JavaDemo18
        // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
        // java.lang.ArrayIndexOutOfBoundsException: Index 0 out of bounds for length 0
        // at JavaDemo18.main(JavaDemo18.java:5)
        // æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ
        // ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ

        // å‚æ•°ç±»å‹é”™è¯¯ java JavaDemo18 a b 
        // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
        // java.lang.NumberFormatException: For input string: "a"
        // at
        // java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
        // at java.base/java.lang.Integer.parseInt(Integer.java:652)
        // at java.base/java.lang.Integer.parseInt(Integer.java:770)
        // at JavaDemo18.main(JavaDemo18.java:5)
        // æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ
        // ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ

        // java JavaDemo18 10 0
        // ã€1ã€‘ç¨‹åºå¼€å§‹æ‰§è¡Œ
        // java.lang.ArithmeticException: / by zero
        // at JavaDemo18.main(JavaDemo18.java:5)
        // æ˜¯å¦å¼‚å¸¸éƒ½æ‰§è¡Œ
        // ã€3ã€‘ç¨‹åºæ‰§è¡Œç»“æŸ
    }
}
```

* åŒæ—¶å¤„ç†å¤šä¸ªå¼‚å¸¸æ—¶ï¼Œè¦æŠŠæ•è·èŒƒå›´å¤§çš„å¼‚å¸¸æ”¾åœ¨æ•è·èŒƒå›´å°çš„å¼‚å¸¸å¤„ç†ä¹‹åã€‚